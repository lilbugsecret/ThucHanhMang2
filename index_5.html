<!DOCTYPE html>
<html>
  <head>
    <title>Tic Tac Toe Simple</title>
    <style>
      body {
        font-family: monospace;
        text-align: center;
        font-size: 20px;
      }
      #game-board {
        margin-bottom: 20px;
        line-height: 1.5;
        letter-spacing: 5px;
      }
    </style>
  </head>
  <body>
    <h2>Tic Tac Toe</h2>
    <div id="game-board"></div>
    <button onclick="playTurn()">Đánh một ô</button>

    <script>
      // 1. Khởi tạo bàn cờ 3x3 với dấu chấm
      let board = [
        [".", ".", "."],
        [".", ".", "."],
        [".", ".", "."],
      ];
      let currentPlayer = "X";

      // 2. Hàm hiển thị bàn cờ ra màn hình
      function drawBoard() {
        let html = board.map((row) => row.join(" ")).join("<br>");
        document.getElementById("game-board").innerHTML = html;
      }

      // 3. Hàm xử lý lượt chơi
      function playTurn() {
        let row = prompt("Nhập hàng (0, 1 hoặc 2):");
        let col = prompt("Nhập cột (0, 1 hoặc 2):");

        // Kiểm tra xem ô đó có hợp lệ không
        if (board[row] && board[row][col] === ".") {
          board[row][col] = currentPlayer; // Đánh dấu vào mảng
          drawBoard(); // Vẽ lại bàn cờ

          if (checkWin()) {
            alert("Người chơi " + currentPlayer + " THẮNG!");
            location.reload(); // Chơi lại từ đầu
          } else {
            // Đổi lượt
            currentPlayer = currentPlayer === "X" ? "O" : "X";
          }
        } else {
          alert("Ô này đã đánh rồi hoặc không hợp lệ!");
        }
      }

      // 4. Hàm kiểm tra thắng (3 ô liên tiếp)
      function checkWin() {
        // Kiểm tra hàng ngang và hàng dọc
        for (let i = 0; i < 3; i++) {
          if (
            board[i][0] !== "." &&
            board[i][0] === board[i][1] &&
            board[i][1] === board[i][2]
          )
            return true;
          if (
            board[0][i] !== "." &&
            board[0][i] === board[1][i] &&
            board[1][i] === board[2][i]
          )
            return true;
        }
        // Kiểm tra 2 đường chéo
        if (
          board[0][0] !== "." &&
          board[0][0] === board[1][1] &&
          board[1][1] === board[2][2]
        )
          return true;
        if (
          board[0][2] !== "." &&
          board[0][2] === board[1][1] &&
          board[1][1] === board[2][0]
        )
          return true;

        return false;
      }

      // Gọi hàm vẽ lần đầu khi mở trang
      drawBoard();
    </script>
  </body>
</html>
